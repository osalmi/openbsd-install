#!/bin/sh

case `uname -m` in
    amd64)
    img="/pxe/initrd/openbsd64.img"
    ;;

    i386)
    img="/pxe/initrd/openbsd32.img"
    ;;

    *)
    echo "Unknown platform."
    exit 1
    ;;
esac

(
tftp install <<EOF
binary
get ${img} /install.rd
quit
EOF
) | sed "s/tftp> //g"

echo "set image /install.rd" >>/etc/boot.conf
echo "Reboot and hope for the best."
